<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no minimum-scale=1'>
  <title>TLDR Dev Notes</title>
  <link rel='stylesheet' href='/css/main.css'> 
  <link rel="stylesheet" href="/prism/prism.css">
</head>
<body>

  
<header id="header">
  <div id="logo">
    <h1>TLDR Dev Notes</h1>
  </div>

  <nav id="main-nav">
    
      
        <a href="/">Home</a>
      
        <a href="/about/">About</a>
      
        <a href="/contact/">Contact</a>
      
        <a href="/quotes/">Quotes</a>
      
        <a href="/resources/">Resources</a>
      
        <a href="/progress/">What i did</a>
      
    
  </nav>

</header>


  
  <div id="sidebar">
  <h6>Sections</h6>
  
  <ul id="list-sections">
    
      <li><a href="/api/">
        
        APIs
        </a></li>
    
      <li><a href="/aws/">
        
        Amazon Web Services (AWS)
        </a></li>
    
      <li><a href="/bash-scripting/">
        
        Bash Scripting
        </a></li>
    
      <li><a href="/css-sass/">
        
        CSS &amp; Sass
        </a></li>
    
      <li><a href="/cheatsheets/">
        
        Cheatsheets
        </a></li>
    
      <li><a href="/commands/">
        
        Commands
        </a></li>
    
      <li><a href="/databases/">
        
        Databases
        </a></li>
    
      <li><a href="/drafts/">
        
        Drafts
        </a></li>
    
      <li><a href="/git-github/">
        
        Git &amp; Github
        </a></li>
    
      <li><a href="/javascript/">
        
        JavaScript
        </a></li>
    
      <li><a href="/jekyll/">
        
        Jekyll
        </a></li>
    
      <li><a href="/linux/">
        
        Linux
        </a></li>
    
      <li><a href="/misc/">
        
        Misc
        </a></li>
    
      <li><a href="/node-api/">
        
        Node-api
        </a></li>
    
      <li><a href="/nodejs/">
        
        Node.js
        </a></li>
    
      <li><a href="/opencart/">
        
        OpenCart
        </a></li>
    
      <li><a href="/php/">
        
        PHP
        </a></li>
    
      <li><a href="/programming/">
        
        Programming
        </a></li>
    
      <li><a href="/python/">
        
        Python
        </a></li>
    
      <li><a href="/quotes/">
        
        Quotes
        </a></li>
    
      <li><a href="/raspberrypi/">
        
        Raspberry Pi
        </a></li>
    
      <li><a href="/reactjs/">
        
        Reactjs
        </a></li>
    
      <li><a href="/redux/">
        
        Redux
        </a></li>
    
      <li><a href="/resources/">
        
        Resources
        </a></li>
    
      <li><a href="/sysadmin/">
        
        System Administration
        </a></li>
    
      <li><a href="/webdev/">
        
        Web Development
        </a></li>
    
      <li><a href="/workflow/">
        
        Workflow
        </a></li>
    
      <li><a href="/ios-swift/">
        
        iOS &amp; Swift
        </a></li>
    
        </ul>

  
  <section>
    <h6>Tags</h6>
    
      <a href="/tags/amazon-rds">amazon-rds</a>, 
    
      <a href="/tags/amazon-s3">amazon-s3</a>, 
    
      <a href="/tags/api">api</a>, 
    
      <a href="/tags/array-methods">array-methods</a>, 
    
      <a href="/tags/aws">aws</a>, 
    
      <a href="/tags/babel">babel</a>, 
    
      <a href="/tags/backups">backups</a>, 
    
      <a href="/tags/bash">bash</a>, 
    
      <a href="/tags/basics">basics</a>, 
    
      <a href="/tags/bluetooth">bluetooth</a>, 
    
      <a href="/tags/cheatsheet">cheatsheet</a>, 
    
      <a href="/tags/cli">cli</a>, 
    
      <a href="/tags/commands">commands</a>, 
    
      <a href="/tags/compass">compass</a>, 
    
      <a href="/tags/concepts">concepts</a>, 
    
      <a href="/tags/coreblueooth">coreblueooth</a>, 
    
      <a href="/tags/crontab">crontab</a>, 
    
      <a href="/tags/css">css</a>, 
    
      <a href="/tags/database">database</a>, 
    
      <a href="/tags/databases">databases</a>, 
    
      <a href="/tags/date">date</a>, 
    
      <a href="/tags/debian">debian</a>, 
    
      <a href="/tags/editor">editor</a>, 
    
      <a href="/tags/education">education</a>, 
    
      <a href="/tags/es2015">es2015</a>, 
    
      <a href="/tags/firebase">firebase</a>, 
    
      <a href="/tags/format">format</a>, 
    
      <a href="/tags/free">free</a>, 
    
      <a href="/tags/fundamentals">fundamentals</a>, 
    
      <a href="/tags/getting-started">getting-started</a>, 
    
      <a href="/tags/git">git</a>, 
    
      <a href="/tags/github-pages">github-pages</a>, 
    
      <a href="/tags/guides">guides</a>, 
    
      <a href="/tags/hacking">hacking</a>, 
    
      <a href="/tags/hosting">hosting</a>, 
    
      <a href="/tags/how-to">how-to</a>, 
    
      <a href="/tags/hugo">hugo</a>, 
    
      <a href="/tags/ios">ios</a>, 
    
      <a href="/tags/javascript">javascript</a>, 
    
      <a href="/tags/jekyll">jekyll</a>, 
    
      <a href="/tags/js">js</a>, 
    
      <a href="/tags/keychain">keychain</a>, 
    
      <a href="/tags/lamp">lamp</a>, 
    
      <a href="/tags/lfs">lfs</a>, 
    
      <a href="/tags/linux">linux</a>, 
    
      <a href="/tags/macos">macos</a>, 
    
      <a href="/tags/markdown">markdown</a>, 
    
      <a href="/tags/media-queries">media-queries</a>, 
    
      <a href="/tags/mongodb">mongodb</a>, 
    
      <a href="/tags/mysql">mysql</a>, 
    
      <a href="/tags/nagios">nagios</a>, 
    
      <a href="/tags/node">node</a>, 
    
      <a href="/tags/nodejs">nodejs</a>, 
    
      <a href="/tags/npm">npm</a>, 
    
      <a href="/tags/opencart">opencart</a>, 
    
      <a href="/tags/phpmyadmin">phpmyadmin</a>, 
    
      <a href="/tags/programming">programming</a>, 
    
      <a href="/tags/python">python</a>, 
    
      <a href="/tags/raspberry-pi">raspberry-pi</a>, 
    
      <a href="/tags/react">react</a>, 
    
      <a href="/tags/react-router">react-router</a>, 
    
      <a href="/tags/reactjs">reactjs</a>, 
    
      <a href="/tags/redux">redux</a>, 
    
      <a href="/tags/s3">s3</a>, 
    
      <a href="/tags/sass">sass</a>, 
    
      <a href="/tags/script">script</a>, 
    
      <a href="/tags/scripts">scripts</a>, 
    
      <a href="/tags/snippets">snippets</a>, 
    
      <a href="/tags/sql">sql</a>, 
    
      <a href="/tags/ssh">ssh</a>, 
    
      <a href="/tags/steganography">steganography</a>, 
    
      <a href="/tags/sublime-text">sublime-text</a>, 
    
      <a href="/tags/sync">sync</a>, 
    
      <a href="/tags/sysadmin">sysadmin</a>, 
    
      <a href="/tags/system-management">system-management</a>, 
    
      <a href="/tags/table">table</a>, 
    
      <a href="/tags/terminal">terminal</a>, 
    
      <a href="/tags/ubuntu">ubuntu</a>, 
    
      <a href="/tags/wifi">wifi</a>, 
    
      <a href="/tags/wordpress">wordpress</a>, 
    
      <a href="/tags/workflow">workflow</a>, 
    
  </section>

  <section>
    <h6>Most Used Tags</h6>
    
      <a href="/tags/linux">linux</a>,
    
      <a href="/tags/es2015">es2015</a>,
    
      <a href="/tags/how-to">how-to</a>,
    
      <a href="/tags/array-methods">array-methods</a>,
    
      <a href="/tags/bash">bash</a>,
    
      <a href="/tags/commands">commands</a>,
    
      <a href="/tags/cheatsheet">cheatsheet</a>,
    
      <a href="/tags/concepts">concepts</a>,
    
      <a href="/tags/mysql">mysql</a>,
    
      <a href="/tags/free">free</a>,
    
      <a href="/tags/sass">sass</a>,
    
      <a href="/tags/compass">compass</a>,
    
      <a href="/tags/python">python</a>,
    
      <a href="/tags/backups">backups</a>,
    
      <a href="/tags/editor">editor</a>,
    
      <a href="/tags/hugo">hugo</a>,
    
      <a href="/tags/opencart">opencart</a>,
    
      <a href="/tags/raspberry-pi">raspberry-pi</a>,
    
      <a href="/tags/basics">basics</a>,
    
      <a href="/tags/database">database</a>,
    
  </section>


</div>


  
  <div id="main">


<h1 class="post_title">Allowing remote access to MySQL</h1>


<div class="post_meta">
  
    
    
  
    
    
    
      <div class="meta_date"><strong>Last updated on:</strong> Apr 27, 2018</div>
    
  
    
    
    <div class="meta_section"><strong>Section:</strong> 
      
        <a href="/databases">Databases</a>
          
    </div>


    
    
  
  </div>



<div class="content">
    

<p>Allow remote access</p>

<pre><code class="language-sql">GRANT PRIVILEGES ON *.*
TO 'user'@'host'
IDENTIFIED BY 'password'
WITH GRANT OPTION;
</code></pre>

<ul>
<li><code>*.*</code> means you&rsquo;re granting access to all tables of all databases. This could be <code>databaseName.*</code> meaning you&rsquo;re granting access to all tables of <em>databaseName</em>. Or you could further fine grain which specific tables of what database you want to give access to, like <code>databaseName.tableName</code></li>
<li><em>host</em> could be a wildcard <code>%</code> allowing access from all hosts with that user/pass combination, or it could be an IP or an FQDN</li>
</ul>

<h2 id="links">Links</h2>

<ul>
<li><a href="https://dev.mysql.com/doc/refman/5.7/en/grant.html" target="_blank">MySQL Docs: 13.7.1.4 GRANT Syntax</a></li>
<li><a href="https://chartio.com/resources/tutorials/how-to-grant-all-privileges-on-a-database-in-mysql/" target="_blank">How to Grant All Privileges on a Database in MySQL</a></li>
</ul>

<h1 id="importing-all-gzipped-databases">Importing ALL Gzipped databases</h1>

<pre><code class="language-sql">mysql -uroot -pecare2@ &lt; alldatabases.sql
</code></pre>

<p>For this command the databases need to exist or the alldatabases.sql script needs to contain the CREATE DATABASE queries for the databases. In order to have the
CREATE DATABASE queries, you gotta dump the databases with the <code>--add-drop-database</code> option, like so:</p>

<pre><code class="language-sql">mysqldump --user=${OLD_DB_USER} --password=${OLD_DB_PASS} --add-drop-database --all-databases | gzip -9 &gt; ${DB_DUMP_FILENAME}.sql.gz
</code></pre>

<blockquote>
<p><code>--add-drop-database</code></p>

<p>Add a DROP DATABASE statement before each CREATE DATABASE statement. This option is typically used in conjunction with the &ndash;all-databases or &ndash;databases option because no CREATE DATABASE statements are written unless one of those options is specified.</p>
</blockquote>

<p>Alternatively, you have to provide the database names of all the databases you dumped in that one compressed file</p>

<pre><code class="language-sql">gunzip &lt; [backupfile.sql.gz] | mysql -u [uname] -p[pass] [dbname]
</code></pre>

<p>If you didn&rsquo;t dump the database with the <code>--add-drop-database</code> option and didn&rsquo;t provide individual database names, you&rsquo;ll get an error that looks like this when improting a file that contains more than one database</p>

<pre><code>ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Usage: mysqldump [OPTIONS] database [tables]
OR     mysqldump [OPTIONS] --databa' at line 1
</code></pre>

<ul>
<li><a href="https://www.linuxquestions.org/questions/linux-server-73/how-to-restore-mysqldump-all-databases-backup-892922/" target="_blank">How to restore mysqldump &ndash;all-databases backup</a></li>
<li><a href="https://stackoverflow.com/questions/16452523/mysqldump-with-create-database-line" target="_blank">StackOverflow: mysqldump with create database line</a></li>
</ul>

<h1 id="scripting">Scripting</h1>

<p>When scripting, use <code>--user</code> and <code>--password</code> instead of <code>-u</code> and <code>-p</code> to avoid errors</p>

<h1 id="update-root-password">Update root password</h1>

<p>This is when you already know the current root password and want to update it</p>

<pre><code class="language-sql">SET PASSWORD FOR 'root'@'localhost' = PASSWORD('MyNewPass'); 
</code></pre>

<h1 id="get-all-mysql-users">Get all MySQL users</h1>

<pre><code class="language-sql">SELECT User FROM mysql.user; -- Get only usernames
SELECT user, host FROM mysql.user; -- Get usernames and the host they are allowed to connect from
SELECT DISTINCT user FROM mysql.user; -- Get only usernames with no repetitions of different hosts
SELECT * FROM mysql.user; -- Get the entire mysql.users table
</code></pre>

<h1 id="delete-a-user">Delete a user</h1>

<pre><code>DROP USER 'blah'
</code></pre>

<h1 id="see-privileges-and-grants">See Privileges and Grants</h1>

<pre><code class="language-sql">SHOW GRANTS; -- See grants for the current user
SHOW GRANTS FOR foo -- See grants for a user called foo
</code></pre>

</div>








<footer id="footer">
<hr>
  <section>
    Please note that this site and the posts on it are, and will always be, a work in progress. If i waited for perfection, iâ€™d never get anything done.
  </section>
  <span class="copyright"> Copyright &copy; 2014 - 2018 Aamnah. All rights reserved.</span>
</footer>

</div>

<script src='/prism/prism.js'></script>
</body>
</html>